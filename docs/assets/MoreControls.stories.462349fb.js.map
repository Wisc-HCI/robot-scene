{"version":3,"file":"MoreControls.stories.462349fb.js","sources":["../../src/stories/MoreControls.stories.jsx"],"sourcesContent":["import React, { useLayoutEffect, useState } from 'react';\nimport Scene from '../components/Scene';\nimport { SceneSlice } from '../components';\nimport { Quaternion, Euler, Vector3 } from 'three';\nimport { range, clamp, toNumber, min } from 'lodash';\nimport { subscribeWithSelector } from 'zustand/middleware';\nimport { immer } from \"zustand/middleware/immer\";\nimport create from \"zustand\";\nimport shallow from 'zustand/shallow';\nexport default {\n  title: 'MoreControls',\n  component: Scene\n};\nconst slice = (set, get, api) => ({\n  ...SceneSlice(set, get),\n  scalarValue: 1,\n  rangeValue: [0.5, 1.5],\n  range: [0, 2],\n  setScalarValue: newScalarValue => set({\n    scalarValue: newScalarValue\n  }),\n  setRangeValue: newRangeValue => set({\n    rangeValue: newRangeValue\n  }),\n  setRange: newRange => set({\n    range: newRange\n  }),\n  onMove: (id, source, worldTransform, localTransform) => set(state => {\n    if (['scalarInputIndicator', 'bottomRangeInputIndicator', 'topRangeInputIndicator'].includes(id)) {\n      // Special logic for handling the scalar and range inputs;\n      // First, update the z-position of the relevant indicator;\n      const value = clamp((10 * localTransform.position.z + 0.5) * (state.range[1] - state.range[0]) + state.range[0], state.range[0], state.range[1]);\n      if (id === 'scalarInputIndicator') {\n        state.scalarValue = value;\n        // Update Visuals\n        state.items[id].position.z = (value - state.range[0]) / (state.range[1] - state.range[0]) * 0.1 - 0.05;\n        // Update the text above\n        state.texts.inputText.value = Math.round(value * 100) / 100;\n      } else {\n        console.log('handling range');\n        // Be robust to whether the dragged value is greater than or less than the various endpoints;\n        if (id == 'bottomRangeInputIndicator' && state.range[1] >= value) {\n          // The bottom input was moved and remains lower than the upper value. Simply set the lower value to the new one.\n          state.rangeValue[0] = value;\n        } else if (id == 'bottomRangeInputIndicator' && state.range[1] < value) {\n          // The bottom input was moved and is now greater than the upper value. Set the new top to the new value, and set the previous top to be the new lower value.\n          state.rangeValue[0] = state.rangeValue[1];\n          state.rangeValue[1] = value;\n        } else if (id == 'topRangeInputIndicator' && state.range[0] <= value) {\n          // The top input was moved and remains greater than the lower value. Simply set the upper value to the new one.\n          state.rangeValue[1] = value;\n        } else if (id == 'topRangeInputIndicator' && state.range[0] > value) {\n          // The top input was moved and is now less than the lower value. Set the new bottom to the new value, and set the previous bottom to be the new upper value.\n          state.rangeValue[1] = state.rangeValue[0];\n          state.rangeValue[0] = value;\n        }\n        // Update visuals\n        state.items.topRangeInputIndicator.position.z = (state.rangeValue[1] - state.range[0]) / (state.range[1] - state.range[0]) * 0.1 - 0.05;\n        state.items.bottomRangeInputIndicator.position.z = (state.rangeValue[0] - state.range[0]) / (state.range[1] - state.range[0]) * 0.1 - 0.05;\n        state.items.rangeInputRange.position = {\n          x: 0,\n          y: 0.05,\n          z: (state.items.topRangeInputIndicator.position.z + state.items.bottomRangeInputIndicator.position.z) / 2\n        };\n        state.items.rangeInputRange.shapeParams.height = (state.rangeValue[1] - state.rangeValue[0]) / (state.range[1] - state.range[0]) * 0.09;\n        // Update the text above\n        state.texts.inputRangeText.value = `${Math.round(state.rangeValue[0] * 100) / 100}, ${Math.round(state.rangeValue[1] * 100) / 100}`;\n      }\n    } else {\n      // Handle everything else\n      state[source][id].position = {\n        ...localTransform.position\n      };\n      state[source][id].rotation = localTransform.quaternion;\n      state[source][id].rotation.x = localTransform.quaternion.x;\n      state[source][id].rotation.y = localTransform.quaternion.y;\n      state[source][id].rotation.z = localTransform.quaternion.z;\n      state[source][id].rotation.w = localTransform.quaternion.w;\n      state[source][id].scale = {\n        ...localTransform.scale\n      };\n    }\n  })\n});\nconst useStore = create(immer(subscribeWithSelector(slice)));\nconsole.log('starting', useStore.getState());\nconst Template = args => {\n  const {\n    tfs,\n    lines,\n    texts,\n    angle,\n    length,\n    rangeInputVal,\n    scalarInputVal,\n    range,\n    ...otherArgs\n  } = args;\n  const [play, pause, reset] = useStore(state => [state.play, state.pause, state.reset]);\n\n  // Define changeable versions of the two range inputs\n  const [scalarValue, setScalarValue] = useStore(state => [state.scalarValue, state.setScalarValue], shallow);\n  const [rangeValue, setRangeValue] = useStore(state => [state.rangeValue, state.setRangeValue], shallow);\n  const setRange = useStore(state => state.setRange, shallow);\n  useLayoutEffect(() => {\n    setScalarValue(scalarInputVal);\n    setRangeValue(rangeInputVal);\n    setRange(range);\n    const hulls = {\n      angleFeedback: getHullMesh(length, angle)\n    };\n    const items = {\n      ...getScalarInputItems(range, scalarValue),\n      ...getRangeInputItems(range, rangeValue)\n    };\n    useStore.setState({\n      tfs,\n      items,\n      hulls,\n      lines,\n      texts\n    });\n  }, [tfs, lines, texts, angle, length, range, scalarInputVal, rangeInputVal]);\n  return <div style={{\n    height: 'calc(100vh - 3rem)',\n    width: 'calc(100vw - 2rem)'\n  }}>\n            <Scene {...otherArgs} store={useStore} />\n            <div style={{\n      textAlign: 'center'\n    }}>\n                <button onClick={() => play()}>Play</button>\n                <button onClick={() => play(0.5)}>Play (0.5x)</button>\n                <button onClick={() => play(2)}>Play (2x)</button>\n                <button onClick={() => pause()}>Pause</button>\n                <button onClick={() => reset(0)}>Reset</button>\n                <button onClick={() => reset(Math.PI / 2)}>Reset (0.25)</button>\n                <button onClick={() => reset(Math.PI)}>Reset (0.5)</button>\n                <button onClick={() => reset(3 * Math.PI / 2)}>Reset (0.75)</button>\n            </div>\n        </div>;\n};\nconst getHullMesh = (length, angle) => {\n  const origin = new Quaternion();\n  const eulerA = new Euler(0, Math.PI / 2, 0);\n  const qA = origin.clone().rotateTowards(new Quaternion().setFromEuler(eulerA), angle);\n  const qB = origin.clone().rotateTowards(new Quaternion().setFromEuler(eulerA), angle / 2);\n  const centralVec = new Vector3(0, 0, length);\n  const vecA = centralVec.clone().applyQuaternion(qA);\n  const vecB = centralVec.clone().applyQuaternion(qB);\n  const points = [{\n    x: 0,\n    y: 0,\n    z: 0\n  }, {\n    x: centralVec.x,\n    y: centralVec.y,\n    z: centralVec.z\n  }, {\n    x: vecA.x,\n    y: vecA.y,\n    z: vecA.z\n  }, ...range(0, 2 * Math.PI, Math.PI / 6).map(a => {\n    return {\n      x: vecA.x * Math.sin(a),\n      y: vecA.x * Math.cos(a),\n      z: vecA.z\n    };\n  }), ...range(0, 2 * Math.PI, Math.PI / 6).map(a => {\n    return {\n      x: vecB.x * Math.sin(a),\n      y: vecB.x * Math.cos(a),\n      z: vecB.z\n    };\n  })];\n  return {\n    frame: 'world',\n    name: 'Robot Space Usage',\n    vertices: points,\n    color: {\n      r: 10,\n      g: 200,\n      b: 235,\n      a: 0.7\n    },\n    wireframe: false\n  };\n};\nconst getScalarInputItems = (rangeBounds, value, offset) => {\n  const z = (value - rangeBounds[0]) / (rangeBounds[1] - rangeBounds[0]) * 0.1 - 0.05;\n  return {\n    scalarInputHousing: {\n      shape: \"capsule\",\n      name: \"Input Housing\",\n      frame: \"movingFrame1\",\n      position: {\n        x: 0,\n        y: offset || 0.05,\n        z: 0\n      },\n      rotation: {\n        w: 1,\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      color: {\n        r: 100,\n        g: 100,\n        b: 100,\n        a: 0.3\n      },\n      scale: {\n        x: 1,\n        y: 1,\n        z: 1\n      },\n      shapeParams: {\n        height: 0.1,\n        radius: 0.02\n      },\n      highlighted: false\n    },\n    scalarInputIndicator: {\n      shape: \"sphere\",\n      name: \"Input Indicator\",\n      frame: \"movingFrame1\",\n      position: {\n        x: 0,\n        y: offset || 0.05,\n        z\n      },\n      rotation: {\n        w: 1,\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      color: {\n        r: 0,\n        g: 0,\n        b: 255,\n        a: 1\n      },\n      scale: {\n        x: 0.03,\n        y: 0.03,\n        z: 0.03\n      },\n      transformMode: 'translate-z',\n      highlighted: false\n    }\n  };\n};\nconst getRangeInputItems = (rangeBounds, valueRange, offset) => {\n  const zSphereTop = (valueRange[1] - rangeBounds[0]) / (rangeBounds[1] - rangeBounds[0]) * .1 - 0.05;\n  const zSphereBottom = (valueRange[0] - rangeBounds[0]) / (rangeBounds[1] - rangeBounds[0]) * .1 - 0.05;\n  const rangeHeight = (valueRange[1] - valueRange[0]) / (rangeBounds[1] - rangeBounds[0]) * 0.09;\n  return {\n    rangeInputHousing: {\n      shape: \"capsule\",\n      name: \"Input Housing\",\n      frame: \"movingFrame2\",\n      position: {\n        x: 0,\n        y: offset || 0.05,\n        z: 0\n      },\n      rotation: {\n        w: 1,\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      color: {\n        r: 100,\n        g: 100,\n        b: 100,\n        a: 0.3\n      },\n      scale: {\n        x: 1,\n        y: 1,\n        z: 1\n      },\n      shapeParams: {\n        height: 0.1,\n        radius: 0.02\n      },\n      highlighted: false\n    },\n    rangeInputRange: {\n      shape: \"capsule\",\n      name: \"Input Housing\",\n      frame: \"movingFrame2\",\n      position: {\n        x: 0,\n        y: offset || 0.05,\n        z: (zSphereTop + zSphereBottom) / 2\n      },\n      rotation: {\n        w: 1,\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      color: {\n        r: 0,\n        g: 0,\n        b: 255,\n        a: 1\n      },\n      scale: {\n        x: 1,\n        y: 1,\n        z: 1\n      },\n      shapeParams: {\n        height: rangeHeight,\n        radius: 0.015\n      },\n      highlighted: false\n    },\n    bottomRangeInputIndicator: {\n      shape: \"sphere\",\n      name: \"Input Indicator Bottom\",\n      frame: \"movingFrame2\",\n      position: {\n        x: 0,\n        y: offset || 0.05,\n        z: zSphereBottom\n      },\n      rotation: {\n        w: 1,\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      color: {\n        r: 0,\n        g: 0,\n        b: 255,\n        a: 1\n      },\n      scale: {\n        x: 0.03,\n        y: 0.03,\n        z: 0.03\n      },\n      transformMode: 'translate-z',\n      highlighted: false\n    },\n    topRangeInputIndicator: {\n      shape: \"sphere\",\n      name: \"Input Indicator Top\",\n      frame: \"movingFrame2\",\n      position: {\n        x: 0,\n        y: offset || 0.05,\n        z: zSphereTop\n      },\n      rotation: {\n        w: 1,\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      color: {\n        r: 0,\n        g: 0,\n        b: 255,\n        a: 1\n      },\n      scale: {\n        x: 0.03,\n        y: 0.03,\n        z: 0.03\n      },\n      transformMode: 'translate-z',\n      highlighted: false\n    }\n  };\n};\nexport const MoreControls = Template.bind({});\nMoreControls.args = {\n  tfs: {\n    movingFrame1: {\n      frame: 'world',\n      position: {\n        x: time => Math.cos(time / 5000),\n        y: time => Math.sin(time / 5000),\n        z: 0.5\n      },\n      rotation: {\n        w: 1,\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      scale: {\n        x: 1,\n        y: 1,\n        z: 1\n      }\n    },\n    movingFrame2: {\n      frame: 'world',\n      position: {\n        x: time => Math.sin(time / 5000),\n        y: time => Math.cos(time / 5000),\n        z: 0.5\n      },\n      rotation: {\n        w: 1,\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      scale: {\n        x: 1,\n        y: 1,\n        z: 1\n      }\n    }\n  },\n  lines: {},\n  texts: {\n    inputText: {\n      value: \"0.5\",\n      frame: \"movingFrame1\",\n      position: {\n        x: 0,\n        y: 0,\n        z: 0.25\n      },\n      color: {\n        r: 0,\n        g: 0,\n        b: 255,\n        a: 1\n      }\n    },\n    inputRangeText: {\n      value: \"0.5, 1.5\",\n      frame: \"movingFrame2\",\n      position: {\n        x: 0,\n        y: 0,\n        z: 0.25\n      },\n      color: {\n        r: 0,\n        g: 0,\n        b: 255,\n        a: 1\n      }\n    }\n  },\n  displayTfs: false,\n  displayGrid: true,\n  isPolar: false,\n  backgroundColor: '#d0d0d0',\n  planeColor: '#a8a8a8',\n  highlightColor: '#ffffff',\n  plane: 0,\n  fov: 90,\n  ar: false,\n  vr: false,\n  angle: Math.PI / 6,\n  length: 0.5,\n  scalarInputVal: 0.5,\n  rangeInputVal: [.5, 1.5],\n  range: [0, 2],\n  onPointerMissed: () => console.log('Missed Click')\n};\nMoreControls.parameters = {\n  ...MoreControls.parameters,\n  storySource: {\n    source: \"args => {\\n  const {\\n    tfs,\\n    lines,\\n    texts,\\n    angle,\\n    length,\\n    rangeInputVal,\\n    scalarInputVal,\\n    range,\\n    ...otherArgs\\n  } = args;\\n  const [play, pause, reset] = useStore(state => [state.play, state.pause, state.reset]);\\n\\n  // Define changeable versions of the two range inputs\\n  const [scalarValue, setScalarValue] = useStore(state => [state.scalarValue, state.setScalarValue], shallow);\\n  const [rangeValue, setRangeValue] = useStore(state => [state.rangeValue, state.setRangeValue], shallow);\\n  const setRange = useStore(state => state.setRange, shallow);\\n  useLayoutEffect(() => {\\n    setScalarValue(scalarInputVal);\\n    setRangeValue(rangeInputVal);\\n    setRange(range);\\n    const hulls = {\\n      angleFeedback: getHullMesh(length, angle)\\n    };\\n    const items = {\\n      ...getScalarInputItems(range, scalarValue),\\n      ...getRangeInputItems(range, rangeValue)\\n    };\\n    useStore.setState({\\n      tfs,\\n      items,\\n      hulls,\\n      lines,\\n      texts\\n    });\\n  }, [tfs, lines, texts, angle, length, range, scalarInputVal, rangeInputVal]);\\n  return <div style={{\\n    height: 'calc(100vh - 3rem)',\\n    width: 'calc(100vw - 2rem)'\\n  }}>\\n            <Scene {...otherArgs} store={useStore} />\\n            <div style={{\\n      textAlign: 'center'\\n    }}>\\n                <button onClick={() => play()}>Play</button>\\n                <button onClick={() => play(0.5)}>Play (0.5x)</button>\\n                <button onClick={() => play(2)}>Play (2x)</button>\\n                <button onClick={() => pause()}>Pause</button>\\n                <button onClick={() => reset(0)}>Reset</button>\\n                <button onClick={() => reset(Math.PI / 2)}>Reset (0.25)</button>\\n                <button onClick={() => reset(Math.PI)}>Reset (0.5)</button>\\n                <button onClick={() => reset(3 * Math.PI / 2)}>Reset (0.75)</button>\\n            </div>\\n        </div>;\\n}\",\n    ...MoreControls.parameters?.storySource\n  }\n};"],"names":["MoreControls_stories","title","component","Scene","slice","set","get","api","SceneSlice","scalarValue","rangeValue","range","setScalarValue","newScalarValue","setRangeValue","newRangeValue","setRange","newRange","onMove","id","source","worldTransform","localTransform","state","includes","value","clamp","position","z","items","texts","inputText","Math","round","console","log","topRangeInputIndicator","bottomRangeInputIndicator","rangeInputRange","x","y","shapeParams","height","inputRangeText","rotation","quaternion","w","scale","useStore","create","immer","subscribeWithSelector","getState","Template","args","tfs","lines","angle","length","rangeInputVal","scalarInputVal","otherArgs","play","pause","reset","shallow","useLayoutEffect","hulls","angleFeedback","getHullMesh","getScalarInputItems","getRangeInputItems","setState","width","_jsx","_jsxs","textAlign","PI","origin","Quaternion","eulerA","Euler","qA","clone","rotateTowards","setFromEuler","qB","centralVec","Vector3","vecA","applyQuaternion","vecB","points","map","a","sin","cos","frame","name","vertices","color","r","g","b","wireframe","rangeBounds","offset","scalarInputHousing","shape","radius","highlighted","scalarInputIndicator","transformMode","valueRange","zSphereTop","zSphereBottom","rangeHeight","rangeInputHousing","MoreControls","bind","movingFrame1","time","movingFrame2","displayTfs","displayGrid","isPolar","backgroundColor","planeColor","highlightColor","plane","fov","ar","vr","onPointerMissed","parameters","storySource"],"mappings":"4SASA,MAAeA,EAAA,CACbC,MAAO,eACPC,UAAWC,CAFE,EAITC,EAAQ,CAACC,EAAKC,EAAKC,KAAS,CAChC,GAAGC,EAAWH,EAAKC,CAAN,EACbG,YAAa,EACbC,WAAY,CAAC,GAAK,GAAN,EACZC,MAAO,CAAC,EAAG,CAAJ,EACPC,kBAAkCP,EAAI,CACpCI,YAAaI,CAAAA,CADsB,EAGrCC,iBAAgCT,EAAI,CAClCK,WAAYK,CAAAA,CADqB,EAGnCC,YAAsBX,EAAI,CACxBM,MAAOM,CAAAA,CADgB,EAGzBC,OAAQ,CAACC,EAAIC,EAAQC,EAAgBC,IAAmBjB,EAAakB,GAAA,CACnE,GAAI,CAAC,uBAAwB,4BAA6B,wBAAtD,EAAgFC,SAASL,CAAzF,EAA8F,CAG1FM,MAAAA,EAAQC,iBAAO,GAAKJ,EAAeK,SAASC,EAAI,KAAQL,EAAMZ,MAAM,GAAKY,EAAMZ,MAAM,IAAMY,EAAMZ,MAAM,GAAIY,EAAMZ,MAAM,GAAIY,EAAMZ,MAAM,EAA1H,EACfQ,IAAO,wBACTI,EAAMd,YAAcgB,EAEpBF,EAAMM,MAAMV,GAAIQ,SAASC,GAAKH,EAAQF,EAAMZ,MAAM,KAAOY,EAAMZ,MAAM,GAAKY,EAAMZ,MAAM,IAAM,GAAM,IAElGY,EAAMO,MAAMC,UAAUN,MAAQO,KAAKC,MAAMR,EAAQ,GAAnB,EAA0B,MAExDS,QAAQC,IAAI,gBAAZ,EAEIhB,GAAM,6BAA+BI,EAAMZ,MAAM,IAAMc,EAEzDF,EAAMb,WAAW,GAAKe,EACbN,GAAM,6BAA+BI,EAAMZ,MAAM,GAAKc,GAEzDf,EAAAA,WAAW,GAAKa,EAAMb,WAAW,GACvCa,EAAMb,WAAW,GAAKe,GACbN,GAAM,0BAA4BI,EAAMZ,MAAM,IAAMc,EAE7DF,EAAMb,WAAW,GAAKe,EACbN,GAAM,0BAA4BI,EAAMZ,MAAM,GAAKc,IAEtDf,EAAAA,WAAW,GAAKa,EAAMb,WAAW,GACvCa,EAAMb,WAAW,GAAKe,GAGxBF,EAAMM,MAAMO,uBAAuBT,SAASC,GAAKL,EAAMb,WAAW,GAAKa,EAAMZ,MAAM,KAAOY,EAAMZ,MAAM,GAAKY,EAAMZ,MAAM,IAAM,GAAM,IACnIY,EAAMM,MAAMQ,0BAA0BV,SAASC,GAAKL,EAAMb,WAAW,GAAKa,EAAMZ,MAAM,KAAOY,EAAMZ,MAAM,GAAKY,EAAMZ,MAAM,IAAM,GAAM,IAChIkB,EAAAA,MAAMS,gBAAgBX,SAAW,CACrCY,EAAG,EACHC,EAAG,IACHZ,GAAIL,EAAMM,MAAMO,uBAAuBT,SAASC,EAAIL,EAAMM,MAAMQ,0BAA0BV,SAASC,GAAK,CAAA,EAE1GL,EAAMM,MAAMS,gBAAgBG,YAAYC,QAAUnB,EAAMb,WAAW,GAAKa,EAAMb,WAAW,KAAOa,EAAMZ,MAAM,GAAKY,EAAMZ,MAAM,IAAM,IAEnIY,EAAMO,MAAMa,eAAelB,MAAS,GAAEO,KAAKC,MAAMV,EAAMb,WAAW,GAAK,GAAjC,EAAwC,QAAQsB,KAAKC,MAAMV,EAAMb,WAAW,GAAK,GAAjC,EAAwC,MAC/H,MAGKU,EAAAA,GAAQD,GAAIQ,SAAW,CAC3B,GAAGL,EAAeK,QAAAA,EAEdP,EAAAA,GAAQD,GAAIyB,SAAWtB,EAAeuB,WAC5CtB,EAAMH,GAAQD,GAAIyB,SAASL,EAAIjB,EAAeuB,WAAWN,EACzDhB,EAAMH,GAAQD,GAAIyB,SAASJ,EAAIlB,EAAeuB,WAAWL,EACzDjB,EAAMH,GAAQD,GAAIyB,SAAShB,EAAIN,EAAeuB,WAAWjB,EACzDL,EAAMH,GAAQD,GAAIyB,SAASE,EAAIxB,EAAeuB,WAAWC,EACnD1B,EAAAA,GAAQD,GAAI4B,MAAQ,CACxB,GAAGzB,EAAeyB,KAAAA,CAErB,CAtDwD,CAd3B,GAuE5BC,EAAWC,EAAOC,EAAMC,EAAsB/C,CAAD,CAAtB,CAAN,EACvB8B,QAAQC,IAAI,WAAYa,EAASI,SAAjC,CAAA,EACA,MAAMC,EAAmBC,GAAA,CACjB,KAAA,CACJC,IAAAA,EACAC,MAAAA,EACA1B,MAAAA,EACA2B,MAAAA,EACAC,OAAAA,EACAC,cAAAA,EACAC,eAAAA,EACAjD,MAAAA,KACGkD,CACDP,EAAAA,EACE,CAACQ,EAAMC,EAAOC,CAAd,EAAuBhB,EAASzB,GAAS,CAACA,EAAMuC,KAAMvC,EAAMwC,MAAOxC,EAAMyC,KAAhC,CAAV,EAG/B,CAACvD,EAAaG,CAAd,EAAgCoC,EAASzB,GAAS,CAACA,EAAMd,YAAac,EAAMX,cAA1B,EAA2CqD,CAArD,EACxC,CAACvD,EAAYI,CAAb,EAA8BkC,EAASzB,GAAS,CAACA,EAAMb,WAAYa,EAAMT,aAAzB,EAAyCmD,CAAnD,EACtCjD,EAAWgC,EAAkBzB,GAAAA,EAAMP,SAAUiD,CAA1B,EACzBC,OAAAA,EAAAA,QAAAA,gBAAgB,IAAM,CACpBtD,EAAegD,CAAD,EACd9C,EAAc6C,CAAD,EACb3C,EAASL,CAAD,EACR,MAAMwD,EAAQ,CACZC,cAAeC,EAAYX,EAAQD,CAAT,CAAA,EAEtB5B,EAAQ,CACZ,GAAGyC,EAAoB3D,EAAOF,CAAR,EACtB,GAAG8D,EAAmB5D,EAAOD,CAAR,CAAA,EAEvBsC,EAASwB,SAAS,CAChBjB,IAAAA,EACA1B,MAAAA,EACAsC,MAAAA,EACAX,MAAAA,EACA1B,MAAAA,CAAAA,CALF,CAAA,EAOC,CAACyB,EAAKC,EAAO1B,EAAO2B,EAAOC,EAAQ/C,EAAOiD,EAAgBD,CAA1D,CAlBY,IAmBR,MAAA,CAAK,MAAO,CACjBjB,OAAQ,qBACR+B,MAAO,oBAFU,EAAZ,SAIG,CAAAC,EAACvE,EAAD,CAAA,GAAW0D,EAAW,MAAOb,CAAAA,CAA7B,EACA2B,EAAA,MAAA,CAAK,MAAO,CAClBC,UAAW,QADO,EAAZ,SAGI,CAAAF,EAAA,SAAA,CAAQ,QAAS,IAAMZ,EAAvB,EAAA,SAAA,MAAA,CAAA,EACAY,EAAA,SAAA,CAAQ,QAAS,IAAMZ,EAAK,EAAD,EAA3B,SAAA,aAAA,CAAA,EACAY,EAAA,SAAA,CAAQ,QAAS,IAAMZ,EAAK,CAAD,EAA3B,SAAA,WAAA,CAAA,EACAY,EAAA,SAAA,CAAQ,QAAS,IAAMX,EAAvB,EAAA,SAAA,OAAA,CAAA,EACAW,EAAA,SAAA,CAAQ,QAAS,IAAMV,EAAM,CAAD,EAA5B,SAAA,OAAA,CAAA,EACAU,EAAA,SAAA,CAAQ,QAAS,IAAMV,EAAMhC,KAAK6C,GAAK,CAAX,EAA5B,SAAA,cAAA,CAAA,EACAH,EAAA,SAAA,CAAQ,QAAS,IAAMV,EAAMhC,KAAK6C,EAAN,EAA5B,SAAA,aAAA,CAAA,EACAH,EAAA,SAAA,CAAQ,QAAS,IAAMV,EAAM,EAAIhC,KAAK6C,GAAK,CAAf,EAA5B,SAAA,cAAA,CAVJ,CAAA,CAAA,CALH,CAAA,CAAA,CAAP,CAkBD,EACKR,EAAc,CAACX,EAAQD,IAAU,CAC/BqB,MAAAA,EAAS,IAAIC,EACbC,EAAS,IAAIC,EAAM,EAAGjD,KAAK6C,GAAK,EAAG,CAA1B,EACTK,EAAKJ,EAAOK,MAAAA,EAAQC,cAAc,IAAIL,EAAAA,EAAaM,aAAaL,CAA9B,EAAuCvB,CAApE,EACL6B,EAAKR,EAAOK,MAAP,EAAeC,cAAc,IAAIL,EAAaM,EAAAA,aAAaL,CAA9B,EAAuCvB,EAAQ,CAA5E,EACL8B,EAAa,IAAIC,EAAQ,EAAG,EAAG9B,CAAlB,EACb+B,EAAOF,EAAWJ,MAAQO,EAAAA,gBAAgBR,CAAnC,EACPS,EAAOJ,EAAWJ,MAAQO,EAAAA,gBAAgBJ,CAAnC,EACPM,EAAS,CAAC,CACdrD,EAAG,EACHC,EAAG,EACHZ,EAAG,CAAA,EACF,CACDW,EAAGgD,EAAWhD,EACdC,EAAG+C,EAAW/C,EACdZ,EAAG2D,EAAW3D,CAAAA,EACb,CACDW,EAAGkD,EAAKlD,EACRC,EAAGiD,EAAKjD,EACRZ,EAAG6D,EAAK7D,CACP,EAAA,GAAGjB,EAAM,QAAA,MAAA,EAAG,EAAIqB,KAAK6C,GAAI7C,KAAK6C,GAAK,CAA3B,EAA8BgB,IAASC,IACzC,CACLvD,EAAGkD,EAAKlD,EAAIP,KAAK+D,IAAID,CAAT,EACZtD,EAAGiD,EAAKlD,EAAIP,KAAKgE,IAAIF,CAAT,EACZlE,EAAG6D,EAAK7D,CAAAA,EAJN,EAMF,GAAGjB,EAAAA,QAAAA,MAAM,EAAG,EAAIqB,KAAK6C,GAAI7C,KAAK6C,GAAK,CAA3B,EAA8BgB,IAASC,IAC1C,CACLvD,EAAGoD,EAAKpD,EAAIP,KAAK+D,IAAID,CAAT,EACZtD,EAAGmD,EAAKpD,EAAIP,KAAKgE,IAAIF,CAAT,EACZlE,EAAG+D,EAAK/D,CAAAA,EAJL,CAlBQ,EAyBR,MAAA,CACLqE,MAAO,QACPC,KAAM,oBACNC,SAAUP,EACVQ,MAAO,CACLC,EAAG,GACHC,EAAG,IACHC,EAAG,IACHT,EAAG,EAJE,EAMPU,UAAW,EAAA,CAEd,EACKlC,EAAsB,CAACmC,EAAahF,EAAOiF,IAAW,CACpD9E,MAAAA,GAAKH,EAAQgF,EAAY,KAAOA,EAAY,GAAKA,EAAY,IAAM,GAAM,IACxE,MAAA,CACLE,mBAAoB,CAClBC,MAAO,UACPV,KAAM,gBACND,MAAO,eACPtE,SAAU,CACRY,EAAG,EACHC,EAAGkE,GAAU,IACb9E,EAAG,CAHK,EAKVgB,SAAU,CACRE,EAAG,EACHP,EAAG,EACHC,EAAG,EACHZ,EAAG,CAJK,EAMVwE,MAAO,CACLC,EAAG,IACHC,EAAG,IACHC,EAAG,IACHT,EAAG,EAJE,EAMP/C,MAAO,CACLR,EAAG,EACHC,EAAG,EACHZ,EAAG,CAHE,EAKPa,YAAa,CACXC,OAAQ,GACRmE,OAAQ,GAFG,EAIbC,YAAa,EA9BK,EAgCpBC,qBAAsB,CACpBH,MAAO,SACPV,KAAM,kBACND,MAAO,eACPtE,SAAU,CACRY,EAAG,EACHC,EAAGkE,GAAU,IACb9E,EAAAA,CAHQ,EAKVgB,SAAU,CACRE,EAAG,EACHP,EAAG,EACHC,EAAG,EACHZ,EAAG,CAJK,EAMVwE,MAAO,CACLC,EAAG,EACHC,EAAG,EACHC,EAAG,IACHT,EAAG,CAJE,EAMP/C,MAAO,CACLR,EAAG,IACHC,EAAG,IACHZ,EAAG,GAHE,EAKPoF,cAAe,cACfF,YAAa,EA3BO,CAAA,CA8BzB,EACKvC,EAAqB,CAACkC,EAAaQ,EAAYP,IAAW,CACxDQ,MAAAA,GAAcD,EAAW,GAAKR,EAAY,KAAOA,EAAY,GAAKA,EAAY,IAAM,GAAK,IACzFU,GAAiBF,EAAW,GAAKR,EAAY,KAAOA,EAAY,GAAKA,EAAY,IAAM,GAAK,IAC5FW,GAAeH,EAAW,GAAKA,EAAW,KAAOR,EAAY,GAAKA,EAAY,IAAM,IACnF,MAAA,CACLY,kBAAmB,CACjBT,MAAO,UACPV,KAAM,gBACND,MAAO,eACPtE,SAAU,CACRY,EAAG,EACHC,EAAGkE,GAAU,IACb9E,EAAG,CAHK,EAKVgB,SAAU,CACRE,EAAG,EACHP,EAAG,EACHC,EAAG,EACHZ,EAAG,CAJK,EAMVwE,MAAO,CACLC,EAAG,IACHC,EAAG,IACHC,EAAG,IACHT,EAAG,EAJE,EAMP/C,MAAO,CACLR,EAAG,EACHC,EAAG,EACHZ,EAAG,CAHE,EAKPa,YAAa,CACXC,OAAQ,GACRmE,OAAQ,GAFG,EAIbC,YAAa,EA9BI,EAgCnBxE,gBAAiB,CACfsE,MAAO,UACPV,KAAM,gBACND,MAAO,eACPtE,SAAU,CACRY,EAAG,EACHC,EAAGkE,GAAU,IACb9E,GAAIsF,EAAaC,GAAiB,CAH1B,EAKVvE,SAAU,CACRE,EAAG,EACHP,EAAG,EACHC,EAAG,EACHZ,EAAG,CAJK,EAMVwE,MAAO,CACLC,EAAG,EACHC,EAAG,EACHC,EAAG,IACHT,EAAG,CAJE,EAMP/C,MAAO,CACLR,EAAG,EACHC,EAAG,EACHZ,EAAG,CAHE,EAKPa,YAAa,CACXC,OAAQ0E,EACRP,OAAQ,IAFG,EAIbC,YAAa,EA9BE,EAgCjBzE,0BAA2B,CACzBuE,MAAO,SACPV,KAAM,yBACND,MAAO,eACPtE,SAAU,CACRY,EAAG,EACHC,EAAGkE,GAAU,IACb9E,EAAGuF,CAHK,EAKVvE,SAAU,CACRE,EAAG,EACHP,EAAG,EACHC,EAAG,EACHZ,EAAG,CAJK,EAMVwE,MAAO,CACLC,EAAG,EACHC,EAAG,EACHC,EAAG,IACHT,EAAG,CAJE,EAMP/C,MAAO,CACLR,EAAG,IACHC,EAAG,IACHZ,EAAG,GAHE,EAKPoF,cAAe,cACfF,YAAa,EA3BY,EA6B3B1E,uBAAwB,CACtBwE,MAAO,SACPV,KAAM,sBACND,MAAO,eACPtE,SAAU,CACRY,EAAG,EACHC,EAAGkE,GAAU,IACb9E,EAAGsF,CAHK,EAKVtE,SAAU,CACRE,EAAG,EACHP,EAAG,EACHC,EAAG,EACHZ,EAAG,CAJK,EAMVwE,MAAO,CACLC,EAAG,EACHC,EAAG,EACHC,EAAG,IACHT,EAAG,CAJE,EAMP/C,MAAO,CACLR,EAAG,IACHC,EAAG,IACHZ,EAAG,GAHE,EAKPoF,cAAe,cACfF,YAAa,EA3BS,CAAA,CA8B3B,EACYQ,EAAejE,EAASkE,KAAK,EAAd,EAC5BD,EAAahE,KAAO,CAClBC,IAAK,CACHiE,aAAc,CACZvB,MAAO,QACPtE,SAAU,CACRY,EAAGkF,GAAQzF,KAAKgE,IAAIyB,EAAO,GAAhB,EACXjF,EAAGiF,GAAQzF,KAAK+D,IAAI0B,EAAO,GAAhB,EACX7F,EAAG,EAHK,EAKVgB,SAAU,CACRE,EAAG,EACHP,EAAG,EACHC,EAAG,EACHZ,EAAG,CAJK,EAMVmB,MAAO,CACLR,EAAG,EACHC,EAAG,EACHZ,EAAG,CAHE,CAbK,EAmBd8F,aAAc,CACZzB,MAAO,QACPtE,SAAU,CACRY,EAAGkF,GAAQzF,KAAK+D,IAAI0B,EAAO,GAAhB,EACXjF,EAAGiF,GAAQzF,KAAKgE,IAAIyB,EAAO,GAAhB,EACX7F,EAAG,EAHK,EAKVgB,SAAU,CACRE,EAAG,EACHP,EAAG,EACHC,EAAG,EACHZ,EAAG,CAJK,EAMVmB,MAAO,CACLR,EAAG,EACHC,EAAG,EACHZ,EAAG,CAHE,CAbK,CApBX,EAwCL4B,MAAO,CAzCW,EA0ClB1B,MAAO,CACLC,UAAW,CACTN,MAAO,MACPwE,MAAO,eACPtE,SAAU,CACRY,EAAG,EACHC,EAAG,EACHZ,EAAG,GAHK,EAKVwE,MAAO,CACLC,EAAG,EACHC,EAAG,EACHC,EAAG,IACHT,EAAG,CAJE,CARE,EAeXnD,eAAgB,CACdlB,MAAO,WACPwE,MAAO,eACPtE,SAAU,CACRY,EAAG,EACHC,EAAG,EACHZ,EAAG,GAHK,EAKVwE,MAAO,CACLC,EAAG,EACHC,EAAG,EACHC,EAAG,IACHT,EAAG,CAJE,CARO,CAhBX,EAgCP6B,WAAY,GACZC,YAAa,GACbC,QAAS,GACTC,gBAAiB,UACjBC,WAAY,UACZC,eAAgB,UAChBC,MAAO,EACPC,IAAK,GACLC,GAAI,GACJC,GAAI,GACJ3E,MAAOzB,KAAK6C,GAAK,EACjBnB,OAAQ,GACRE,eAAgB,GAChBD,cAAe,CAAC,GAAI,GAAL,EACfhD,MAAO,CAAC,EAAG,CAAJ,EACP0H,gBAAiB,IAAMnG,QAAQC,IAAI,cAAZ,CAzFL,QA2FpBmF,EAAagB,WAAa,CACxB,GAAGhB,EAAagB,WAChBC,YAAa,CACXnH,OAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GACR,IAAGkG,EAAAA,EAAagB,aAAbhB,YAAAA,EAAyBiB,WAFjB,CAFW"}